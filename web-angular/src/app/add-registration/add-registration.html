<div class="wrap">
  <!-- Header -->
  <header class="header">
    <div class="brand">
      <div class="logo">
        <img src="/images/006-charity.png" alt="Logo" />
      </div>
      <div class="brand-meta">
        <h1 class="brand-title">City Charity</h1>
        <p class="brand-sub" id="subtitle">
          Find community events and fundraisers
        </p>
      </div>
    </div>
    <nav class="nav">
      <a class="pill" routerLink="/">Home</a>
      <a class="pill" routerLink="/search">Search</a>
    </nav>
  </header>

  <section *ngIf="event" class="panel" id="detailPanel">
    <div class="meta">
      <span class="chip">{{event.category_name}}</span>
      <span class="chip">{{event.organisation_name}}</span>
      <span class="{{getStatusChip(event).cls}}">{{getStatusChip(event).label}}</span>
    </div>
    <h2 class="detail-title">{{event.name}}</h2>
    <p class="pr">{{eventWhen(event)}}</p>
    <p class="pr">{{eventWhere(event)}}</p>
    <p>{{event.short_description}}</p>
    <p style="white-space:pre-wrap">{{event.full_description}}</p>

    <div class="registration-form">
      <h2>Add Registration</h2>

      <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label>Name</label>
          <input type="text" formControlName="name" />
          <small *ngIf="f.name.touched && f.name.invalid" class="error">
            Name is required (min 2 characters).
          </small>
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" formControlName="email" />
          <small *ngIf="f.email.touched && f.email.invalid" class="error">
            Please enter a valid email.
          </small>
        </div>

        <div class="form-group">
          <label>Phone</label>
          <input type="text" formControlName="phone" />
          <small *ngIf="f.phone.touched && f.phone.invalid" class="error">
            Please enter a valid phone number.
          </small>
        </div>

        <div class="form-group">
          <label>Amount</label>
          <input type="number" formControlName="donation" />
          <small *ngIf="f.donation.touched && f.donation.invalid" class="error">
            Donation must be at least 1.
          </small>
        </div>

        <div class="form-group">
          <label>Quantity</label>
          <input type="number" formControlName="quantity" />
          <small *ngIf="f.quantity.touched && f.quantity.invalid" class="error">
            Quantity must be at least 1.
          </small>
        </div>

        <div class="detail-actions">
          <a class="btn-ghost" [routerLink]="'/detail/' + eventId">Back to details</a>
          <button type="submit" class="btn-primary">
            Submit
          </button>
        </div>
      </form>

      <p *ngIf="successMessage" class="success">{{ successMessage }}</p>
      <p *ngIf="errorMessage" class="error">{{ errorMessage }}</p>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <small>Powered by KAJSE</small>
  </footer>
</div>

